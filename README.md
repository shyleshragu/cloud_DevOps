# Cloud DevOps

## Introduction

This repository contains the architectural diagrams for deploying [Trading Application](https://github.com/shyleshragun/trading_app) onto cloud server. The Trading Application is a stock trading simulation REST API that uses CRUD operations, create new account, and trade stocks on the basis of monetary transaction. This application was deployed onto AWS Elastic Beanstalk which assisted the developers in deploying and managing applications in the AWS Cloud. A zip file generated by Maven was used as the *application code* in EB AWS. The EB was used to create a ***Dev*** environment for the application. CloudFormation was used to provision the application infrastructures. Then, a ***Prod*** environment was created using AWS console in the EB application.

---



## Docker Architecture Diagram

![Docker Architecture](https://github.com/shyleshragun/cloud_DevOps/blob/master/assets/docker%20architecture.JPG)

In order to dockerize the applications, the following steps were followed:

1. *trading-net*, a network bridge that was used to connect database to application.

   >  docker network create --driver bridge trading-net

2. *jrvs-psql*, a docker image which is an executable package that contains all the information about the database.

   > docker build -t jrvs-psql .

3. *trading-app*, a docker image which is an executable package that contains all the information of the application.

   > docker build -t trading-app .

4. Containers for the two docker images were created with required environment variables.

   > docker run --rm --name jrvs-psql \
   > -e POSTGRES_PASSWORD=password \
   > -e POSTGRES_DB=jrvstrading \
   > -e POSTGRES_USER=postgres \
   > --network trading-net \
   > -d -p 5432:5432 jrvs-psql

   > docker run \
   > -e "PSQL_URL=jdbc:postgresql://jrvs-psql:5432/jrvstrading" \
   > -e "PSQL_USER=postgres" \
   > -e 'PSQL_PASSWORD=password' \
   > -e "IEX_PUB_TOKEN={public IEX token}" \
   > --network trading-net \
   > -p 5000:5000 -t trading-app

   

Maven assembly was used to package jar file into a zip file. The zip file was used to create an Elastic Beanstalk application that was deployed using the zip file as *Application code*. 

> <assembly>
>   <id>elastic-beanstalk</id>
>   <formats>
>     <format>zip</format>
>   </formats>
>   <fileSets>
>     <fileSet>
>       <directory>target</directory>
>       <outputDirectory>/</outputDirectory>
>       <includes>
>         <include>trading-1.0-SNAPSHOT.jar</include>
>       </includes>
>     </fileSet>
>   </fileSets>
> </assembly>



Tables were created using SQL. [schema.sql](https://github.com/shyleshragun/trading_app/blob/master/psql/sql_ddl/schema.sql)  contains the SQL commands required to create the tables. 

---



## Cloud Architecture Diagram

![Cloud Architecture](https://github.com/shyleshragun/cloud_DevOps/blob/master/assets/cloud%20architecture.png)



---



## AWS E and Jenkins CI/CD Pipeline Diagram

![Jenkins Architecture](https://github.com/shyleshragun/cloud_DevOps/blob/master/assets/jenkins.png)



---

